{"remainingRequest":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/src/pages/BillingHistory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/src/pages/BillingHistory.vue","mtime":1569534651398},{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapActions, mapGetters } from 'vuex'\nimport datatable from 'bootstrap-vue-datatable'\nexport default {\n    name: 'billing-history',\n    \n    data() {\n      return {\n        userEvents: [],\n        hostedEvents: [],\n        userId: null,\n        data: [],\n\n        // Columns that should be displayed on The Table\n        columns: [\n          {name: \"event_id\", th: \"Engagement Name\"},\n          {name: \"amount\", th: \"Payment\"},\n          {name: \"user_id\", th: \"Paid By\"},\n        ],\n      }\n    },\n    computed : {\n        ...mapGetters(['getEvents', 'getBillings', 'allUsers']),\n\n        filterBillings() {\n          let billing = this.getBillings.filter(bill => bill.host_id == this.userId)\n          return billing\n        }\n    },\n    methods: {\n        ...mapActions(['fetchBillings', 'fetchEvents']),\n        \n        filterBills() {\n            this.getBillings.filter(bill => {\n                if(bill.host_id == this.userId) {\n                    bill.user_id = this.getUser(bill.user_id)\n                    bill.event_id = this.getEvent(bill.event_id)\n                    bill.amount = \"USD $\" + bill.amount\n                    console.log(bill)\n                    this.data.push(bill)\n                }\n            })\n            console.log(\"Data\")\n            console.log(this.data)\n        },\n\n        getUser(id) {  \n            let user_item = this.allUsers.find(user => user.id === id)\n            return user_item.first_name + \" \" + user_item.last_name \n        },\n\n        getEvent(id) {\n            console.log(id)\n            let event_item = this.getEvents.find(item => item.id === id)\n            return event_item.event_name\n        },\n      \n    },\n    watch:{\n    getBillings(){\n        if(this.getBillings.length>0){\n\n            this.filterBills()\n\n            \n        }\n    }\n    },\n    created() {\n      this.fetchEvents();\n        this.fetchBillings();\n        console.log(this.getBillings)\n        const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n        if(loggedUser != null) {\n            this.userId = loggedUser.id\n        }\n        this.filterBills();\n      \n    }\n}\n",{"version":3,"sources":["BillingHistory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"BillingHistory.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div>\n        \n    <div class=\"main\">\n      <div class=\"section section-images\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-md-12\">\n                <h2>Billing History</h2>\n                <div class=\"row\">\n                  <div class=\"col-md-12\">\n                      <datatable :data=\"data\" :columns=\"columns\"></datatable>\n                  </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex'\nimport datatable from 'bootstrap-vue-datatable'\nexport default {\n    name: 'billing-history',\n    \n    data() {\n      return {\n        userEvents: [],\n        hostedEvents: [],\n        userId: null,\n        data: [],\n\n        // Columns that should be displayed on The Table\n        columns: [\n          {name: \"event_id\", th: \"Engagement Name\"},\n          {name: \"amount\", th: \"Payment\"},\n          {name: \"user_id\", th: \"Paid By\"},\n        ],\n      }\n    },\n    computed : {\n        ...mapGetters(['getEvents', 'getBillings', 'allUsers']),\n\n        filterBillings() {\n          let billing = this.getBillings.filter(bill => bill.host_id == this.userId)\n          return billing\n        }\n    },\n    methods: {\n        ...mapActions(['fetchBillings', 'fetchEvents']),\n        \n        filterBills() {\n            this.getBillings.filter(bill => {\n                if(bill.host_id == this.userId) {\n                    bill.user_id = this.getUser(bill.user_id)\n                    bill.event_id = this.getEvent(bill.event_id)\n                    bill.amount = \"USD $\" + bill.amount\n                    console.log(bill)\n                    this.data.push(bill)\n                }\n            })\n            console.log(\"Data\")\n            console.log(this.data)\n        },\n\n        getUser(id) {  \n            let user_item = this.allUsers.find(user => user.id === id)\n            return user_item.first_name + \" \" + user_item.last_name \n        },\n\n        getEvent(id) {\n            console.log(id)\n            let event_item = this.getEvents.find(item => item.id === id)\n            return event_item.event_name\n        },\n      \n    },\n    watch:{\n    getBillings(){\n        if(this.getBillings.length>0){\n\n            this.filterBills()\n\n            \n        }\n    }\n    },\n    created() {\n      this.fetchEvents();\n        this.fetchBillings();\n        console.log(this.getBillings)\n        const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n        if(loggedUser != null) {\n            this.userId = loggedUser.id\n        }\n        this.filterBills();\n      \n    }\n}\n</script>\n\n<style scoped>\n    \n</style>"]}]}