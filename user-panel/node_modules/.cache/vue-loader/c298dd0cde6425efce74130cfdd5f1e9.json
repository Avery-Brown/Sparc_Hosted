{"remainingRequest":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/src/pages/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/src/pages/Profile.vue","mtime":1569422283381},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Tabs, TabPane, Modal, FormGroupInput, Button } from '@/components';\nimport Multiselect from 'vue-multiselect'\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n  name: 'profile',\n  bodyClass: 'profile-page',\n  components: {\n    Tabs,\n    Modal,\n    TabPane,\n    Multiselect,\n    [Button.name]: Button,\n    [FormGroupInput.name]: FormGroupInput\n  },\n  computed: { \n      ...mapGetters(['allTags', 'status', 'error', 'user', 'loggedUser']),\n\n      getInterests() {\n        var tags = this.allTags\n        this.fetchedTags = []\n        this.userData.interests.forEach(item => {\n          tags.filter(tag => {\n            if(tag.id == item) {\n              this.fetchedTags.push(tag.value)\n            }\n          })\n        })\n        console.log(\"Fetched \" + this.fetchedTags)\n      }\n    },\n  data() {\n    return {\n      value: [],\n      fetchedTags: [],\n      modals: {\n        classic: false,\n        videoModal: false\n      },\n      userImage: {\n        profile_image: null\n      },\n      userVideo: {\n        profile_video: null\n      },\n      picture: '',\n      profileVideo: null,\n      interestId: [],\n      userData: {\n          first_name: '',\n          last_name: '',\n          age: '',\n          email: '',\n          job_occupation: '',\n          institute: '',\n          about: '',\n          interests: [],\n      },\n      \n    }\n  },\n  methods: {\n    ...mapActions(['fetchTags', 'updateUserProfile', 'updateImage', 'updateVideo']),\n\n    onPickVideo() {\n      this.$refs.VideoInput.click();  \n    },\n    onVideoSelected(event) {\n          let videoFile = event.target.files[0];\n          this.userVideo.profile_video = videoFile\n          this.updateVideo(this.userVideo)\n      },\n    onPickFile() { \n       this.$refs.FileInput.click();\n    },\n    onFilePicked(event) { \n      this.picture = event.target.files[0].name;\n      this.userImage.profile_image = event.target.files[0]\n      this.updateImage(this.userImage);\n      console.log(event.target.files[0].name)\n    },\n    updateProfile() {\n      if(this.value.length > 0) {\n            this.value.forEach(item => {\n            this.interestId.push(item.id)\n          })\n          \n          this.userData.interests = this.interestId,\n\n          this.updateUserProfile(this.userData)\n          this.modals.classic = false\n          this.getInterests\n      }\n      else {\n        const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n        this.userData.interests = loggedUser.interests\n        this.updateUserProfile(this.userData)\n          this.modals.classic = false\n          this.getInterests\n      }\n    }\n  },\n\n  watch: {\n    loggedUser (val) {\n        //&& val.uid.length > 0\n        console.log(\"auth state watched\")\n\n            if (val) {\n                setTimeout(() => {\n                  if(val.profile_image) {\n                    this.profileImage = val.profile_image\n                  }\n                  if(val.profile_video) {\n                    this.profileVideo = val.profile_video\n                  }\n                  console.log('VAL',val)\n                  console.log(val.profile_image)\n                }, 500)\n            }\n            else{\n              //this.success = false\n              console.log('Something wrong')\n            }\n        },\n  },\n\n  created() {\n    \n    const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n    if(loggedUser != null) {\n      this.userData.first_name = loggedUser.first_name\n      this.userData.last_name = loggedUser.last_name\n      this.userData.age = loggedUser.age\n      this.userData.about = loggedUser.about\n      this.userData.email = loggedUser.email\n      this.userData.interests = loggedUser.interests\n      this.userData.job_occupation = loggedUser.job_occupation\n      this.userData.institute = loggedUser.institute\n      if(loggedUser.profile_image) {\n        this.profileImage = loggedUser.profile_image\n      }\n      if(loggedUser.profile_video) {\n        this.profileVideo = loggedUser.profile_video\n      }\n    }\n    this.fetchTags();\n\n    if(this.allTags != null) {\n        console.log(this.allTags)\n        this.getInterests\n      }\n  }\n};\n",{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <div class=\"container mt-5\">\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <div class=\"user-info\">\n            <n-button type=\"info\" style=\"float: right;\" @click.native=\"modals.classic = true\">\n              Edit Profile\n            </n-button>\n            <div style=\"clear: both\"></div>\n            <div class=\"photo-container text-center\"  @click=\"onPickFile()\">\n              <i class=\"icon fa fa-pencil\"></i>\n              <input type=\"file\" @change=\"onFilePicked\" style=\"display:none;\" ref=\"FileInput\">\n              <img class=\"pic\" v-if=\"profileImage!= null\" :src=\"profileImage\" alt=\"\" />\n              <input type=\"file\" style=\"display:none\">\n            </div>\n            <h4 class=\"text-center text-success\"><b>{{userData.first_name + \" \" + userData.last_name}}</b></h4>\n            <h5 class=\"text-center\"><b class=\"text-info\">Age :</b> {{ userData.age }} Years</h5>\n            <span id=\"about\">{{userData.about}}</span>\n            \n          </div>\n          <div class=\"user-info mt-2\">\n            <h4 class=\"text-info\">INTERESTS</h4>\n            <span class=\"badge badge-pill badge-success\" v-for=\"(tag,index) in fetchedTags\" :key=\"index\">{{tag}}</span>\n          </div> \n        </div>\n        <div class=\"col-md-8\">\n          <h2 class=\"title-up\">Profile Video</h2>\n            <div>\n                <h5 v-if=\"profileVideo == null\" class=\"text-info\" style=\"float: left;\">No Profile Video Found.</h5>\n                <n-button class=\"btn-info\" style=\"float: right;\" @click=\"onPickVideo()\">Update Profile Video</n-button>\n                <input type=\"file\" @change=\"onVideoSelected\" style=\"display:none;\" ref=\"VideoInput\">\n                <span style=\"clear: both;\"></span>\n            </div>\n            <video v-if=\"profileVideo != null\" :src=\"profileVideo\" controls height=\"300\" width=\"650\"></video>\n        </div>\n      </div>\n    </div>\n    <!-- <div class=\"page-header clear-filter\">\n      \n      <div class=\"container\">\n        \n        <n-button type=\"primary\" @click.native=\"modals.classic = true\">\n            Edit Profile\n        </n-button>\n        <n-button class=\"ml-3\" v-if=\"profileVideo != null\" type=\"success\" @click.native=\"modals.videoModal = true\">\n            View Profile Video\n        </n-button>\n      </div>\n    </div> -->\n    \n         <!-- Classic Modal -->\n    <modal :show.sync=\"modals.classic\" headerClasses=\"justify-content-center\">\n      <h4 slot=\"header\" class=\"title title-up\">Update Profile</h4>\n      <form>\n        <div class=\"row\">\n          <div class=\"col-md-6 col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"\">First Name</label>\n              <fg-input\n                  class=\"no-border input-lg\"\n                  addon-left-icon=\"now-ui-icons users_single-02\"\n                  placeholder=\"First Name\"\n                  v-model=\"userData.first_name\"\n                  type=\"text\">\n              </fg-input>\n            </div>\n          </div>\n\n          <div class=\"col-md-6 col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"\">Last Name</label>\n              <fg-input\n                class=\"no-border input-lg\"\n                addon-left-icon=\"now-ui-icons users_single-02\"\n                placeholder=\"Last Name\"\n                v-model=\"userData.last_name\"\n                type=\"email\">\n              </fg-input>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"row\">\n          <div class=\"col-md-6 col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"\">Age</label>\n              <fg-input\n                  class=\"no-border input-lg\"\n                  addon-left-icon=\"now-ui-icons users_single-02\"\n                  placeholder=\"Age\"\n                  v-model=\"userData.age\"\n                  type=\"number\">\n              </fg-input>\n            </div>\n          </div>\n\n          <div class=\"col-md-6 col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"\">Email</label>\n              <fg-input\n                class=\"no-border input-lg\"\n                addon-left-icon=\"now-ui-icons ui-1_email-85\"\n                placeholder=\"Email\"\n                v-model=\"userData.email\"\n                disabled\n                type=\"email\">\n              </fg-input>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-md-6 col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"\">Occupation</label>\n              <fg-input\n                class=\"no-border input-lg\"\n                addon-left-icon=\"now-ui-icons business_briefcase-24\"\n                placeholder=\"Occupation\"\n                v-model=\"userData.job_occupation\"\n                type=\"text\">\n              </fg-input>\n            </div>\n          </div>\n\n          <div class=\"col-md-6 col-lg-6\">\n            <div class=\"form-group\">\n              <label for=\"\">School</label>\n              <fg-input\n                class=\"no-border input-lg\"\n                addon-left-icon=\"now-ui-icons education_hat\"\n                placeholder=\"School\"\n                v-model=\"userData.institute\"\n                type=\"text\">\n            </fg-input>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-md-12 col-lg-12\">\n            <div class=\"form-group\">\n              <label for=\"\">About</label>\n              <fg-input\n                class=\"no-border input-lg\"\n                addon-left-icon=\"now-ui-icons ui-2_chat-round\"\n                placeholder=\"About\"\n                v-model=\"userData.about\"\n                type=\"text\">\n              </fg-input>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-md-12 col-lg-12\">\n            <div class=\"form-group\">\n              <label for=\"\">Pick Interests</label>\n              <multiselect v-model=\"value\" \n                :options=\"allTags\" \n                :multiple=\"true\" \n                :close-on-select=\"false\" \n                :clear-on-select=\"false\" \n                :preserve-search=\"true\" \n                placeholder=\"Pick Your Interests\" \n                label=\"value\" \n                track-by=\"value\" \n                :preselect-first=\"false\">\n                  <template slot=\"selection\" slot-scope=\"{ values, search, isOpen }\"><span class=\"multiselect__single\" v-if=\"values.length &amp;&amp; !isOpen\">{{ values.length }} options selected</span></template>\n              </multiselect>\n            </div>\n          </div>\n        </div>\n      </form>\n      <template slot=\"footer\">\n        <n-button type=\"danger\" @click.native=\"modals.classic = false\"\n          >Close</n-button>\n          <n-button type=\"success\" @click=\"updateProfile\">Update Profile</n-button>\n      </template>\n    </modal>\n\n    \n  </div>\n</template>\n<script>\nimport { Tabs, TabPane, Modal, FormGroupInput, Button } from '@/components';\nimport Multiselect from 'vue-multiselect'\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n  name: 'profile',\n  bodyClass: 'profile-page',\n  components: {\n    Tabs,\n    Modal,\n    TabPane,\n    Multiselect,\n    [Button.name]: Button,\n    [FormGroupInput.name]: FormGroupInput\n  },\n  computed: { \n      ...mapGetters(['allTags', 'status', 'error', 'user', 'loggedUser']),\n\n      getInterests() {\n        var tags = this.allTags\n        this.fetchedTags = []\n        this.userData.interests.forEach(item => {\n          tags.filter(tag => {\n            if(tag.id == item) {\n              this.fetchedTags.push(tag.value)\n            }\n          })\n        })\n        console.log(\"Fetched \" + this.fetchedTags)\n      }\n    },\n  data() {\n    return {\n      value: [],\n      fetchedTags: [],\n      modals: {\n        classic: false,\n        videoModal: false\n      },\n      userImage: {\n        profile_image: null\n      },\n      userVideo: {\n        profile_video: null\n      },\n      picture: '',\n      profileVideo: null,\n      interestId: [],\n      userData: {\n          first_name: '',\n          last_name: '',\n          age: '',\n          email: '',\n          job_occupation: '',\n          institute: '',\n          about: '',\n          interests: [],\n      },\n      \n    }\n  },\n  methods: {\n    ...mapActions(['fetchTags', 'updateUserProfile', 'updateImage', 'updateVideo']),\n\n    onPickVideo() {\n      this.$refs.VideoInput.click();  \n    },\n    onVideoSelected(event) {\n          let videoFile = event.target.files[0];\n          this.userVideo.profile_video = videoFile\n          this.updateVideo(this.userVideo)\n      },\n    onPickFile() { \n       this.$refs.FileInput.click();\n    },\n    onFilePicked(event) { \n      this.picture = event.target.files[0].name;\n      this.userImage.profile_image = event.target.files[0]\n      this.updateImage(this.userImage);\n      console.log(event.target.files[0].name)\n    },\n    updateProfile() {\n      if(this.value.length > 0) {\n            this.value.forEach(item => {\n            this.interestId.push(item.id)\n          })\n          \n          this.userData.interests = this.interestId,\n\n          this.updateUserProfile(this.userData)\n          this.modals.classic = false\n          this.getInterests\n      }\n      else {\n        const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n        this.userData.interests = loggedUser.interests\n        this.updateUserProfile(this.userData)\n          this.modals.classic = false\n          this.getInterests\n      }\n    }\n  },\n\n  watch: {\n    loggedUser (val) {\n        //&& val.uid.length > 0\n        console.log(\"auth state watched\")\n\n            if (val) {\n                setTimeout(() => {\n                  if(val.profile_image) {\n                    this.profileImage = val.profile_image\n                  }\n                  if(val.profile_video) {\n                    this.profileVideo = val.profile_video\n                  }\n                  console.log('VAL',val)\n                  console.log(val.profile_image)\n                }, 500)\n            }\n            else{\n              //this.success = false\n              console.log('Something wrong')\n            }\n        },\n  },\n\n  created() {\n    \n    const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n    if(loggedUser != null) {\n      this.userData.first_name = loggedUser.first_name\n      this.userData.last_name = loggedUser.last_name\n      this.userData.age = loggedUser.age\n      this.userData.about = loggedUser.about\n      this.userData.email = loggedUser.email\n      this.userData.interests = loggedUser.interests\n      this.userData.job_occupation = loggedUser.job_occupation\n      this.userData.institute = loggedUser.institute\n      if(loggedUser.profile_image) {\n        this.profileImage = loggedUser.profile_image\n      }\n      if(loggedUser.profile_video) {\n        this.profileVideo = loggedUser.profile_video\n      }\n    }\n    this.fetchTags();\n\n    if(this.allTags != null) {\n        console.log(this.allTags)\n        this.getInterests\n      }\n  }\n};\n</script>\n<style scoped>\n  .user-info {\n    padding: 20px;\n    border: 2px solid #e5e5e5;\n  }\n  #about {\n    max-width: 160px !important;\n  }\n  .pic:hover {\n    cursor: pointer;\n  }\n  .icon {\n    position: absolute;\n    padding: 10px;\n    background: #2CA8FF;\n    border-radius: 50%;\n    color: #fff;\n    left: 58%;\n    top:30%;\n  }\n</style>\n"]}]}