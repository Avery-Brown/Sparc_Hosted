{"remainingRequest":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/src/pages/CreateEngagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/src/pages/CreateEngagement.vue","mtime":1569534651398},{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lizzetclifton/Documents/Fall 2019/CS_408/CS408-Sparc/Sparc_Hosted/user-panel/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  Button,\n  Alert,\n  Checkbox,\n  Radio,\n  FormGroupInput,\n  Switch\n} from '@/components';\nimport { DatePicker, TimePicker, TimeSelect } from 'element-ui';\nimport Multiselect from 'vue-multiselect'\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n    name: 'create_engagement',\n    components: {\n        Multiselect,\n        Alert,\n    [Button.name]: Button,\n    [Checkbox.name]: Checkbox,\n    [Radio.name]: Radio,\n    [DatePicker.name]: DatePicker,\n    [TimePicker.name]: TimePicker,\n    [TimeSelect.name]: TimeSelect,\n    [FormGroupInput.name]: FormGroupInput,\n    [Switch.name]: Switch,\n    [Option.name]: Option,\n  },\n  computed: { ...mapGetters(['allTags', 'eventCreated', 'charities'])},\n  data() {\n      return {\n          file: '',\n          createButton: 'Create Engagement',\n          pickerOptions: {\n            disabledDate(time) {\n                return time.getTime() < Date.now();\n            },\n          },\n          timeValue: {\n            HH: \"10\",\n            mm: \"05\",\n            ss: \"00\"\n        },\n        eventPayload: {\n            created_by: null,\n            event_name: null,\n            charity1: null,\n            charity2: null,\n            deleted: false,\n            event_location: null,\n            event_address: null,\n            event_location_access: null,\n            event_space: null,\n            host_contact: null,\n            zoom_link: null,\n            capacity: null,\n            virtual_capacity: null,\n            google_link: null,\n            event_cause1: null,\n            event_cause2: null,\n            event_price_per_person: null,\n            cause: 'no',\n            event_free: 'yes',\n            event_type: 'in Person',\n            tags: [],\n            date: null,\n            start_time: null,\n            end_time: null,    \n            event_description: null,\n            event_image: null,\n            event_video: null,\n        },\n        warning: false,\n        message: '',\n        interestId: [],\n        allCharites: []\n      }\n  },\n  methods: {\n      ...mapActions(['fetchTags','createEvent', 'fetchCharities', 'updateTags']),\n\n      validateEvent() {\n          \n          if(this.eventPayload.event_name == null || this.eventPayload.event_location == null || this.eventPayload.host_contact == null || this.eventPayload.event_space == null || this.eventPayload.event_address == null || this.eventPayload.event_location_access == null || this.eventPayload.date == null || this.eventPayload.start_time == null || this.eventPayload.end_time == null || this.eventPayload.event_description == null || this.eventPayload.tags == null){\n              this.message = \"Please Fill Required Fields\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'in Person' && this.eventPayload.capacity == null) {\n              this.message = \"Please Set In Person Capacity for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.capacity != null && this.eventPayload.capacity < 1) {\n              this.message = \"Please Set Valid In Person Capacity for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'virtual' && (this.eventPayload.zoom_link == null || this.eventPayload.google_link == null)) {\n              this.message = \"Please Enter Zoom Link and Google Hangout Link for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'both' && (this.eventPayload.zoom_link == null || this.eventPayload.google_link == null)) {\n              this.message = \"Please Enter Zoom Link and Google Hangout Link for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'virtual' && this.eventPayload.virtual_capacity == null) {\n              this.message = \"Please Set Virtual Capacity for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.virtual_capacity != null && this.eventPayload.virtual_capacity < 1) {\n              this.message = \"Please Set Valid Virtual Capacity for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'both' && (this.eventPayload.capacity == null || this.eventPayload.virtual_capacity == null )) {\n              this.message = \"Both In Person and Virtual Capacity Required\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'both' && (this.eventPayload.capacity != null && this.eventPayload.capacity < 1) || (this.eventPayload.virtual_capacity != null && this.eventPayload.virtual_capacity < 1)) {\n              this.message = \"Valid In Person and Virtual Capacity Required\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_free == 'no' && this.eventPayload.event_price_per_person == null) {\n              this.message = \"Please Enter Price Per Person for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_price_per_person != null && this.eventPayload.event_price_per_person < 1) {\n              this.message = \"Please Enter Price Valid Per Person for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.cause == 'yes' && this.eventPayload.charity1 == null) {\n              this.message = \"Please Select Charity 1 for Cause\"\n              this.warning = true\n          }\n          else if(this.eventPayload.cause == 'yes' && this.eventPayload.event_cause1 == null) {\n              this.message = \"Please Select Cause for Charity\"\n              this.warning = true\n          }\n          else if(this.eventPayload.charity1 != null && this.eventPayload.event_cause1 < 1) {\n              this.message = \"Please Enter Valid Percentage for Charity 1\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_cause1 != null && this.eventPayload.event_cause1 < 1) {\n              this.message = \"Please Select Valid Percentage for Charity 1\"\n              this.warning = true\n          }\n          else if(this.eventPayload.charity2 != null && this.eventPayload.event_cause2 < 1) {\n              this.message = \"Please Enter Valid Percentage for Charity 2\"\n              this.warning = true\n          }\n        //   else if(this.eventPayload.event_image == null) {\n        //       this.message = \"Please Pick Event Image\"\n        //       this.warning = true\n        //   }\n          else {\n              console.log(\"OK\")\n              this.registerEvent();\n          }\n      },\n\n      registerEvent() {\n          this.createButton = \"Creating Engagement Please Wait...\"\n          const newDate = this.eventPayload.date.toLocaleDateString()\n          this.eventPayload.date = newDate\n\n            if(this.eventPayload.tags != null) {\n                this.eventPayload.tags.forEach(item => {\n                this.interestId.push(item.id)\n                })\n                this.eventPayload.tags.forEach(item => {\n                    item.count++\n                    console.log(item)\n                    this.updateTags(item)\n                })\n            }\n\n          this.eventPayload.tags = this.interestId\n\n          this.createEvent(this.eventPayload);\n         \n      },\n      onFileSelected(event) {\n          let file = event.target.files[0]\n          this.eventPayload.event_image = file\n          var extension = file.name.substring(file.name.lastIndexOf('.')+1);\n      },\n      onVideoSelected(event) {\n          let video = event.target.files[0];\n          this.eventPayload.event_video = video\n          console.log(this.eventPayload.event_video.name);\n      }\n  },\n  created() {\n    const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n    if(loggedUser != null) {\n        this.eventPayload.created_by = loggedUser.id\n    }\n    this.fetchTags();\n    this.fetchCharities()\n  },\n\n  watch: {\n      eventCreated(val) {\n          if(val == 'success') {\n              this.$router.push({path: '/host'})\n          }\n      }\n  }\n}\n",{"version":3,"sources":["CreateEngagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateEngagement.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div>\n        <div class=\"main\">\n            <div class=\"section\">\n                <div class=\"container ml-auto mr-auto\">\n                    <div class=\"col-md-2\"></div>\n                    <div class=\"col-md-12\">\n                        <h2 class=\"text-center title-up text-info\">Create New Engagement</h2>\n                        <div class=\"space-50\"></div>\n                        <div class=\"row\">\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Upload Engagement Featured Image</label>\n                                <input type=\"file\" class=\"btn btn-primary mb-3\" @change=\"onFileSelected\">\n                            </div>\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Upload Engagement Video</label><br/>\n                                <input type=\"file\" class=\"btn btn-primary mb-3\" @change=\"onVideoSelected\">\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-sm-6 col-lg-6\">\n                                <label for=\"\">Engagement Name*</label>\n                                <fg-input placeholder=\"Engagement Name\" v-model=\"eventPayload.event_name\"></fg-input>\n                            </div>\n                            <div class=\"col-sm-6 col-lg-6\">\n                                    <label for=\"\">Engagement Date*</label>\n                                    <fg-input>\n                                    <el-date-picker\n                                        type=\"date\"\n                                        popper-class=\"date-picker date-picker-success\"\n                                        :picker-options=\"pickerOptions\"\n                                        placeholder=\"Pick Engagement Date\"\n                                        v-model=\"eventPayload.date\"\n                                    >\n                                    </el-date-picker>\n                                    </fg-input>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-sm-6 col-lg-6\">\n                                <label for=\"\">Start Time*</label>\n                                <fg-input>\n                                    <!-- <el-time-select\n                                        v-model=\"eventPayload.start_time\"\n                                        :picker-options=\"{\n                                            start: '1:00',\n                                            step: '00:15',\n                                            end: '12:59',\n                                            format: 'HH:mm a'\n                                        }\"\n                                        placeholder=\"Select time\">\n                                        </el-time-select> -->\n                                    <el-time-picker\n                                        type=\"time\"\n                                        value-format=\"hh:mm a\"\n                                        popper-class=\"time-picker time-picker-primary\"\n                                        placeholder=\"Pick Start Time\"\n                                        v-model=\"eventPayload.start_time\"\n                                        :picker-options=\"{\n                                            format: 'HH:mm a',\n                                            \n                                        }\"\n                                    >\n                                    </el-time-picker>\n                                    \n                                    \n                                </fg-input>\n                            </div>\n                            <div class=\"col-sm-6 col-lg-6\">\n                                <label for=\"\">End Time*</label>\n                                <fg-input>\n                                    <el-time-picker\n                                        type=\"time\"\n                                        value-format=\"hh:mm a\"\n                                        popper-class=\"time-picker time-picker-primary\"\n                                        placeholder=\"Pick End Time\"\n                                        v-model=\"eventPayload.end_time\"\n                                        :picker-options=\"{\n                                            format: 'HH:mm a',\n                                            \n                                        }\"\n                                    >\n                                    </el-time-picker>\n                                </fg-input>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Engagement Location*</label>\n                                <fg-input placeholder=\"Engagement Location\" v-model=\"eventPayload.event_location\"></fg-input>\n                            </div>\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Engagement Address*</label>\n                                <fg-input placeholder=\"Engagement Address\" v-model=\"eventPayload.event_address\"></fg-input>\n                            </div>   \n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Space Name/Number*</label>\n                                <fg-input placeholder=\"Space Name/Number(Lobby of Hotel)\" v-model=\"eventPayload.event_space\"></fg-input>\n                            </div>\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Location Access Instructions*</label>\n                                <fg-input placeholder=\"Location Access Instructions\" v-model=\"eventPayload.event_location_access\"></fg-input>\n                            </div>   \n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-md-12 col-lg-12\">\n                                <label for=\"\">Host Contact Information*</label>\n                                <fg-input placeholder=\"Host Contact Information\" v-model=\"eventPayload.host_contact\"></fg-input>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-md-12 col-lg-12\">\n                                <label for=\"\">Engagement Description*</label>\n                                <fg-input placeholder=\"Engagement Description\" v-model=\"eventPayload.event_description\"></fg-input>\n                            </div>\n                        </div>\n                        <div class=\"row mb-2\">\n                            <div class=\"col-md-12 col-lg-12\">\n                                <label for=\"\">Engagement Tags*</label>\n                                <multiselect v-model=\"eventPayload.tags\" \n                                :options=\"allTags\" \n                                :multiple=\"true\" \n                                :close-on-select=\"false\" \n                                :clear-on-select=\"false\" \n                                :preserve-search=\"true\" \n                                placeholder=\"Pick Engagement Tags\" \n                                label=\"value\" \n                                track-by=\"value\" \n                                :preselect-first=\"false\">\n                                    <template slot=\"selection\" slot-scope=\"{ values, search, isOpen }\"><span class=\"multiselect__single\" v-if=\"values.length &amp;&amp; !isOpen\">{{ values.length }} options selected</span></template>\n                                </multiselect>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-md-12 col-lg-12\">\n                                <label for=\"\" class=\"mb-3\">Is Engagement virtual, in person, or both ?</label><br>\n                                <input type=\"radio\" v-model=\"eventPayload.event_type\" value=\"virtual\"> Virtual\n                                <input type=\"radio\" v-model=\"eventPayload.event_type\" value=\"in Person\"> In Person\n                                <input type=\"radio\" v-model=\"eventPayload.event_type\" value=\"both\"> Both   \n                            </div>\n                        </div>\n                        <div class=\"row mt-3\" v-if=\"eventPayload.event_type == 'in Person'\">\n                            <div class=\"col-md-12 col-lg-12\">\n                                <label for=\"\">People Capacity*</label>\n                                <fg-input type=\"number\" min=\"1\" placeholder=\"Capacity\" v-model=\"eventPayload.capacity\"></fg-input>\n                            </div>\n                        </div>\n                        <div class=\"row mt-3\" v-if=\"eventPayload.event_type == 'virtual'\">\n                            <div class=\"col-md-12 col-lg-12\">\n                                <label for=\"\">People Capacity*</label>\n                                <fg-input type=\"number\" min=\"1\" placeholder=\"Capacity\" v-model=\"eventPayload.virtual_capacity\"></fg-input>\n                            </div>\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Zoom Link*</label>\n                                <fg-input placeholder=\"Zoom Link\" v-model=\"eventPayload.zoom_link\"></fg-input>\n                            </div>\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Google Hangout Link*</label>\n                                <fg-input placeholder=\"Google Hangout Link\" v-model=\"eventPayload.google_link\"></fg-input>\n                            </div>\n                        </div>\n                        <div class=\"row mt-3\" v-if=\"eventPayload.event_type == 'both'\">\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">In Person Capacity*</label>\n                                <fg-input type=\"number\" min=\"1\" placeholder=\"In Person Capacity\" v-model=\"eventPayload.capacity\"></fg-input>\n                            </div>\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Virtual Capacity*</label>\n                                <fg-input type=\"number\" min=\"1\" placeholder=\"Virtual Capacity\" v-model=\"eventPayload.virtual_capacity\"></fg-input>\n                            </div>\n\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Zoom Link*</label>\n                                <fg-input placeholder=\"Zoom Link\" v-model=\"eventPayload.zoom_link\"></fg-input>\n                            </div>\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Google Hangout Link*</label>\n                                <fg-input placeholder=\"Google Hangout Link\" v-model=\"eventPayload.google_link\"></fg-input>\n                            </div>\n                        </div>\n                        <div class=\"row mt-3\">\n                            <div class=\"col-md-6 col-lg-6\">\n                                <label for=\"\">Will this Engagement be Free ?</label> <br>\n                                <input type=\"radio\" v-model=\"eventPayload.event_free\" value=\"yes\"> Yes\n                                <input type=\"radio\" v-model=\"eventPayload.event_free\" value=\"no\"> No\n                            </div>\n                        </div>\n                        <div class=\"row mt-2\" v-if=\"eventPayload.event_free == 'no'\">\n                            <div class=\"col-md-12 col-lg-12\">\n                                <label for=\"\">$ Price Per Person*</label>\n                                <fg-input placeholder=\"$ Price Per Person\" type=\"number\" min=\"1\" v-model=\"eventPayload.event_price_per_person\"></fg-input>\n                            </div>\n                            <div class=\"col-md-12 col-lg-12 mb-2\">\n                                <label for=\"\">Will this Engagement go to a cause ?</label> <br>\n                                <input type=\"radio\" v-model=\"eventPayload.cause\" value=\"yes\"> Yes\n                                <input type=\"radio\" v-model=\"eventPayload.cause\" value=\"no\"> No\n                            </div>\n                            <div class=\"col-md-3\" v-if=\"eventPayload.cause == 'yes'\">\n                                <label for=\"\">Select Charity*</label>\n                                <select class=\"form-control select\" placeholder=\"Select Charity\" v-model=\"eventPayload.charity1\">\n                                    <option v-for=\"(charity, i) in charities\" :key=\"i\" :value=\"charity.name\">{{charity.name}}</option>  \n                                </select>\n                            </div>\n                            <div class=\"col-md-3\" v-if=\"eventPayload.cause == 'yes'\">\n                                <label for=\"\">Charity 1*</label>\n                                <fg-input placeholder=\"Percentage\" type=\"number\" min=\"1\" v-model=\"eventPayload.event_cause1\"></fg-input>\n                            </div>\n                            <div class=\"col-md-3\" v-if=\"eventPayload.cause == 'yes'\">\n                                <label for=\"\">Select Charity</label>\n                                <select class=\"form-control select\" v-model=\"eventPayload.charity2\">\n                                    <option v-for=\"(charity, i) in charities\" :key=\"i\" :value=\"charity.name\">{{charity.name}}</option>\n                                </select>\n                            </div>\n                            <div class=\"col-md-3\" v-if=\"eventPayload.cause == 'yes'\">\n                                <label for=\"\">Charity 2 (Optional)</label>\n                                <fg-input placeholder=\"Percentage\" type=\"number\" min=\"1\" v-model=\"eventPayload.event_cause2\"></fg-input>\n                            </div>    \n                        </div>\n                        <div class=\"row col-md-12 col-lg-12\">\n                            <n-button class=\"btn btn-primary btn-block ml-3 mt-3\" round @click=\"validateEvent\">{{ createButton }}</n-button>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-md-12\">\n                                <alert type=\"danger\" v-if=\"warning\" dismissible>\n                                    <div class=\"alert-icon\">\n                                    <i class=\"now-ui-icons objects_support-17\"></i>\n                                    </div>\n                                    <strong>Something went wrong!</strong> {{ message }}\n                                </alert>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {\n  Button,\n  Alert,\n  Checkbox,\n  Radio,\n  FormGroupInput,\n  Switch\n} from '@/components';\nimport { DatePicker, TimePicker, TimeSelect } from 'element-ui';\nimport Multiselect from 'vue-multiselect'\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n    name: 'create_engagement',\n    components: {\n        Multiselect,\n        Alert,\n    [Button.name]: Button,\n    [Checkbox.name]: Checkbox,\n    [Radio.name]: Radio,\n    [DatePicker.name]: DatePicker,\n    [TimePicker.name]: TimePicker,\n    [TimeSelect.name]: TimeSelect,\n    [FormGroupInput.name]: FormGroupInput,\n    [Switch.name]: Switch,\n    [Option.name]: Option,\n  },\n  computed: { ...mapGetters(['allTags', 'eventCreated', 'charities'])},\n  data() {\n      return {\n          file: '',\n          createButton: 'Create Engagement',\n          pickerOptions: {\n            disabledDate(time) {\n                return time.getTime() < Date.now();\n            },\n          },\n          timeValue: {\n            HH: \"10\",\n            mm: \"05\",\n            ss: \"00\"\n        },\n        eventPayload: {\n            created_by: null,\n            event_name: null,\n            charity1: null,\n            charity2: null,\n            deleted: false,\n            event_location: null,\n            event_address: null,\n            event_location_access: null,\n            event_space: null,\n            host_contact: null,\n            zoom_link: null,\n            capacity: null,\n            virtual_capacity: null,\n            google_link: null,\n            event_cause1: null,\n            event_cause2: null,\n            event_price_per_person: null,\n            cause: 'no',\n            event_free: 'yes',\n            event_type: 'in Person',\n            tags: [],\n            date: null,\n            start_time: null,\n            end_time: null,    \n            event_description: null,\n            event_image: null,\n            event_video: null,\n        },\n        warning: false,\n        message: '',\n        interestId: [],\n        allCharites: []\n      }\n  },\n  methods: {\n      ...mapActions(['fetchTags','createEvent', 'fetchCharities', 'updateTags']),\n\n      validateEvent() {\n          \n          if(this.eventPayload.event_name == null || this.eventPayload.event_location == null || this.eventPayload.host_contact == null || this.eventPayload.event_space == null || this.eventPayload.event_address == null || this.eventPayload.event_location_access == null || this.eventPayload.date == null || this.eventPayload.start_time == null || this.eventPayload.end_time == null || this.eventPayload.event_description == null || this.eventPayload.tags == null){\n              this.message = \"Please Fill Required Fields\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'in Person' && this.eventPayload.capacity == null) {\n              this.message = \"Please Set In Person Capacity for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.capacity != null && this.eventPayload.capacity < 1) {\n              this.message = \"Please Set Valid In Person Capacity for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'virtual' && (this.eventPayload.zoom_link == null || this.eventPayload.google_link == null)) {\n              this.message = \"Please Enter Zoom Link and Google Hangout Link for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'both' && (this.eventPayload.zoom_link == null || this.eventPayload.google_link == null)) {\n              this.message = \"Please Enter Zoom Link and Google Hangout Link for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'virtual' && this.eventPayload.virtual_capacity == null) {\n              this.message = \"Please Set Virtual Capacity for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.virtual_capacity != null && this.eventPayload.virtual_capacity < 1) {\n              this.message = \"Please Set Valid Virtual Capacity for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'both' && (this.eventPayload.capacity == null || this.eventPayload.virtual_capacity == null )) {\n              this.message = \"Both In Person and Virtual Capacity Required\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_type == 'both' && (this.eventPayload.capacity != null && this.eventPayload.capacity < 1) || (this.eventPayload.virtual_capacity != null && this.eventPayload.virtual_capacity < 1)) {\n              this.message = \"Valid In Person and Virtual Capacity Required\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_free == 'no' && this.eventPayload.event_price_per_person == null) {\n              this.message = \"Please Enter Price Per Person for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_price_per_person != null && this.eventPayload.event_price_per_person < 1) {\n              this.message = \"Please Enter Price Valid Per Person for Engagement\"\n              this.warning = true\n          }\n          else if(this.eventPayload.cause == 'yes' && this.eventPayload.charity1 == null) {\n              this.message = \"Please Select Charity 1 for Cause\"\n              this.warning = true\n          }\n          else if(this.eventPayload.cause == 'yes' && this.eventPayload.event_cause1 == null) {\n              this.message = \"Please Select Cause for Charity\"\n              this.warning = true\n          }\n          else if(this.eventPayload.charity1 != null && this.eventPayload.event_cause1 < 1) {\n              this.message = \"Please Enter Valid Percentage for Charity 1\"\n              this.warning = true\n          }\n          else if(this.eventPayload.event_cause1 != null && this.eventPayload.event_cause1 < 1) {\n              this.message = \"Please Select Valid Percentage for Charity 1\"\n              this.warning = true\n          }\n          else if(this.eventPayload.charity2 != null && this.eventPayload.event_cause2 < 1) {\n              this.message = \"Please Enter Valid Percentage for Charity 2\"\n              this.warning = true\n          }\n        //   else if(this.eventPayload.event_image == null) {\n        //       this.message = \"Please Pick Event Image\"\n        //       this.warning = true\n        //   }\n          else {\n              console.log(\"OK\")\n              this.registerEvent();\n          }\n      },\n\n      registerEvent() {\n          this.createButton = \"Creating Engagement Please Wait...\"\n          const newDate = this.eventPayload.date.toLocaleDateString()\n          this.eventPayload.date = newDate\n\n            if(this.eventPayload.tags != null) {\n                this.eventPayload.tags.forEach(item => {\n                this.interestId.push(item.id)\n                })\n                this.eventPayload.tags.forEach(item => {\n                    item.count++\n                    console.log(item)\n                    this.updateTags(item)\n                })\n            }\n\n          this.eventPayload.tags = this.interestId\n\n          this.createEvent(this.eventPayload);\n         \n      },\n      onFileSelected(event) {\n          let file = event.target.files[0]\n          this.eventPayload.event_image = file\n          var extension = file.name.substring(file.name.lastIndexOf('.')+1);\n      },\n      onVideoSelected(event) {\n          let video = event.target.files[0];\n          this.eventPayload.event_video = video\n          console.log(this.eventPayload.event_video.name);\n      }\n  },\n  created() {\n    const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n    if(loggedUser != null) {\n        this.eventPayload.created_by = loggedUser.id\n    }\n    this.fetchTags();\n    this.fetchCharities()\n  },\n\n  watch: {\n      eventCreated(val) {\n          if(val == 'success') {\n              this.$router.push({path: '/host'})\n          }\n      }\n  }\n}\n</script>\n\n<style scoped>\n    \n</style>\n"]}]}