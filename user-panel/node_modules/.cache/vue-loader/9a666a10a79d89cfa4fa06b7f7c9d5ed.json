{"remainingRequest":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/src/pages/HostPastEvents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/src/pages/HostPastEvents.vue","mtime":1569422283380},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericlin/Documents/Duke/Junior/Fall/CS408/Sparc_Hosted/user-panel/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex'\n  import moment from 'moment'\n\nexport default {\n    name: 'host-past-engagements',\n    data() {\n      return {\n        userEvents: [],\n        foundEvents: [],\n        rating: 5,\n        currentDate: null\n      }\n    },\n    computed : {\n        ...mapGetters(['getEvents', 'allRatings']),\n        thevents() {\n          return this.userEvents.map(event_id=> {\n          let event_item=this.getEvents.find(event_item=> event_item.id==event_id)// Date.parse(this.currentDate) <= Date.parse(event_item.date)) \n          return event_item;\n          })\n        },\n        dates(){\n          return this.thevents.filter(event_item=>moment(event_item.date).isBefore(moment().format('MM/DD/YYYY'))==true)\n        }\n    },\n    watch:{\n      getEvents(){\n         if(this.getEvents.length>0){\n           this.fetchPast()\n      //              var today = new Date();\n      //   var dd = today.getDate();\n      //   var mm = today.getMonth() + 1;\n      //   var yyyy = today.getFullYear();\n\n      //   this.currentDate = mm + \"/\" + dd + \"/\" + yyyy;\n      //         const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n      // for(var key in loggedUser.events_hosted){\n      //   this.userEvents.push(loggedUser.events_hosted[key])\n      // }\n              // console.log(this.thevents)\n              // console.log(this.dates)\n              // this.foundEvents=this.dates\n\n         }\n      }\n    },\n    methods: {\n        viewEvent(id) {\n          this.$router.push({path: '/events/'+id})\n        },\n        fetchPast(){\n          this.userEvents=[]\n        var today = new Date();\n        var dd = today.getDate();\n        var mm = today.getMonth() + 1;\n        var yyyy = today.getFullYear();\n        this.currentDate = mm + \"/\" + dd + \"/\" + yyyy;\n        const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n        for(var key in loggedUser.events_hosted){\n          this.userEvents.push(loggedUser.events_hosted[key])\n        }\n        console.log(\" hook\")\n      \n        if(this.getEvents.length>0) {\n              this.foundEvents=this.dates\n         }\n        },\n        getRatings(id) {\n      let avgRating = [];\n      this.allRatings.filter(rating => {\n        if(rating.host_id == id) {\n          avgRating.push(rating.ratingStars)\n        }\n      })\n\n      if(avgRating.length > 0) {\n        let sum = 0.0;\n        let avg = 0.0;\n\n        for(var i = 0; i < avgRating.length; i++) {\n          sum += avgRating[i]\n        }\n        avg = sum / avgRating.length;\n        return avg          \n      }\n    },\n    },\n    created() {\n        this.fetchPast()\n    }\n}\n",{"version":3,"sources":["HostPastEvents.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HostPastEvents.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div>\n        \n    <div class=\"main\">\n      <div class=\"section section-images\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-md-12\">\n                <h2>Past Engagements</h2>\n                <div class=\"row\" v-if=\"getEvents.length>0\">\n                  <div class=\"col-md-4\" v-for=\"(event, index) in foundEvents\" v-if=\"event.deleted==false\" :key=\"index\">\n                    <div >\n                    <div @click=\"viewEvent(event.id)\" style=\"cursor: pointer\">\n                        <div class=\"card\">\n                          <div class=\"card-header\">\n                              <img v-if=\"event.event_image != null\" :src=\"event.event_image\" width=\"500\" height=\"200\" alt=\"\">\n                              <img v-else src=\"../../public/sparcS.png\" width=\"500\" height=\"200\" alt=\"\">\n                          </div>\n                          <div class=\"card-body\">\n                              <h5 class=\"text-success title-up\"><b> {{ event.event_name }} </b></h5>\n                              <h6> <star-rating :rating=\"getRatings(event.created_by)\" :increment=\"0.1\" :star-size=\"16\" :read-only=\"true\"></star-rating></h6>\n                              <h6 class=\"text-info\"> <i class=\"fa fa-map-marker\"></i> {{ event.event_location }}</h6>\n                              <h6 class=\"text-info\"> <i class=\"fa fa-clock-o\"></i> {{ event.start_time + \" - \" + event.end_time }} </h6>\n                              <h6 class=\"text-info\"> <i class=\"fa fa-calendar\"></i> {{ event.date }}</h6>\n                          </div>\n                        </div>\n                    </div>\n                  </div>\n                  </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n  import moment from 'moment'\n\nexport default {\n    name: 'host-past-engagements',\n    data() {\n      return {\n        userEvents: [],\n        foundEvents: [],\n        rating: 5,\n        currentDate: null\n      }\n    },\n    computed : {\n        ...mapGetters(['getEvents', 'allRatings']),\n        thevents() {\n          return this.userEvents.map(event_id=> {\n          let event_item=this.getEvents.find(event_item=> event_item.id==event_id)// Date.parse(this.currentDate) <= Date.parse(event_item.date)) \n          return event_item;\n          })\n        },\n        dates(){\n          return this.thevents.filter(event_item=>moment(event_item.date).isBefore(moment().format('MM/DD/YYYY'))==true)\n        }\n    },\n    watch:{\n      getEvents(){\n         if(this.getEvents.length>0){\n           this.fetchPast()\n      //              var today = new Date();\n      //   var dd = today.getDate();\n      //   var mm = today.getMonth() + 1;\n      //   var yyyy = today.getFullYear();\n\n      //   this.currentDate = mm + \"/\" + dd + \"/\" + yyyy;\n      //         const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n      // for(var key in loggedUser.events_hosted){\n      //   this.userEvents.push(loggedUser.events_hosted[key])\n      // }\n              // console.log(this.thevents)\n              // console.log(this.dates)\n              // this.foundEvents=this.dates\n\n         }\n      }\n    },\n    methods: {\n        viewEvent(id) {\n          this.$router.push({path: '/events/'+id})\n        },\n        fetchPast(){\n          this.userEvents=[]\n        var today = new Date();\n        var dd = today.getDate();\n        var mm = today.getMonth() + 1;\n        var yyyy = today.getFullYear();\n        this.currentDate = mm + \"/\" + dd + \"/\" + yyyy;\n        const loggedUser = JSON.parse(localStorage.getItem('loggedUser'));\n        for(var key in loggedUser.events_hosted){\n          this.userEvents.push(loggedUser.events_hosted[key])\n        }\n        console.log(\" hook\")\n      \n        if(this.getEvents.length>0) {\n              this.foundEvents=this.dates\n         }\n        },\n        getRatings(id) {\n      let avgRating = [];\n      this.allRatings.filter(rating => {\n        if(rating.host_id == id) {\n          avgRating.push(rating.ratingStars)\n        }\n      })\n\n      if(avgRating.length > 0) {\n        let sum = 0.0;\n        let avg = 0.0;\n\n        for(var i = 0; i < avgRating.length; i++) {\n          sum += avgRating[i]\n        }\n        avg = sum / avgRating.length;\n        return avg          \n      }\n    },\n    },\n    created() {\n        this.fetchPast()\n    }\n}\n</script>\n\n<style scoped>\n    \n</style>"]}]}